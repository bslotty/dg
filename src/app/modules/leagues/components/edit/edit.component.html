<div class="small">
  <app-section-header title="Edit League" [buttons]="headerButtons" (actionClick)="actionClick($event)">
  </app-section-header>

  <div *ngIf="resolve;else loader">

    <div class="message">
      <p *ngIf="deleteConfirm" class="warn">Please confirm deletion. The Members, Sessions, and Stats will not be saved.</p>
    </div>

    <form [formGroup]='form'>

      <!-- Name  -->
      <mat-form-field required="true">
        <input matInput placeholder="Name" formControlName='name' name='name'>
        <mat-error *ngIf=" 
              form.get('name').touched && 
              form.get('name').invalid">
          Invalid Name
        </mat-error>
      </mat-form-field>

      <!--  Visibility Toggle -->
      <div class="split">
        <label class="col-md">Visiblility?</label>

        <div class="row push">
          <div *ngFor="let option of visModes;">
            <button *ngIf="form.get('visibility').value == option" mat-flat-button color="accent">{{ option }}</button>
            <button *ngIf="form.get('visibility').value != option" mat-stroked-button color="primary"
              (click)='changeVis(option)'>{{ option }}</button>
          </div>
        </div>

      </div>


      <!--  Description -->
      <mat-form-field>
        <textarea matInput placeholder="Description" formControlName='description'>
          </textarea>
        <mat-hint>
          (optional)
        </mat-hint>
      </mat-form-field>


      <!--  Requirements  
      <mat-form-field>
        <textarea matInput placeholder="Restrictions" formControlName='restrictions'>
          </textarea>
        <mat-hint>
          (optional)
        </mat-hint>
      </mat-form-field>
      -->

      <!--  Actions !-->
      <div class="actions">
        <div class="row" *ngIf="!deleteConfirm">
          <a mat-raised-button color="warn" (click)="toggleDelete()">
            <label>Delete</label>
          </a>
          <a mat-raised-button color="primary" (click)="updateLeague()" [disabled]="form.invalid || form.pristine">
            <label>Update</label>
          </a>
        </div>

        <div class="row" *ngIf="deleteConfirm">
          <a mat-raised-button color="primary" (click)="toggleDelete()">
            <label>Cancel</label>
          </a>
          <a mat-raised-button color="warn" (click)="deleteLeague()">
            <label>Delete</label>
          </a>
        </div>

      </div>

    </form>
  </div>

</div>


<ng-template #loader>
  <app-feedback></app-feedback>
</ng-template>