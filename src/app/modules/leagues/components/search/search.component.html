<app-section-header title="Search Leagues" back="true"></app-section-header>


<div class="panel row">
  <form [formGroup]="form">
    <mat-form-field>
      <input matInput formControlName="term" placeholder="Enter a League Name" />
    </mat-form-field>
  </form>
</div>



<app-section-header title="Results"></app-section-header>






<div *ngIf="resolve; else loader">

  <div *ngIf="status == 'fresh'" class="panel row">
    <p class="message">Search a League's name, or a Course name you play at.</p>
  </div>

  <div *ngIf="status == 'empty'" class="panel row warn">
    <p class="message"><i>{{ form.get('term').value }}</i> returned no results.</p>
  </div>

  <div *ngIf="status == 'error'">
    <div class="panel row warn">
      <p class="message">Error: {{ message }}</p>
    </div>

    <div *ngIf="message == 'Request Timed Out.'" class="panel row">
      <p class="message">Retry this request.
        <a mat-flat-button color="primary" (click)="search(this.form.get('term').value)">
          <span class="icon-rotate-ccw"></span>
        </a>
      </p>
    </div>


  </div>

  <div *ngIf="status == 'success'">
    <div class="panel row" *ngFor="let league of results" @flyInPanelRow>
      <div>
        <label>
          {{ league.name }}
        </label>
      </div>

      <div>
        <a mat-flat-button color="primary" routerLink="/leagues/{{ league.id }}/join">
          <span class="icon-external-link"></span>
        </a>
      </div>
    </div>
  </div>


</div>


<ng-template #loader>
  <loader></loader>
</ng-template>